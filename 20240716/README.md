# AWS
> 웹 서비스를 개발하고 배포를 할 때 
> 배포를 하기 위해 필요한 제 3자(사용자)가 접속할 수 있는 서버 컴퓨터가 필요함
> 1년 365일 24 시간 내내 켜져 있어야하는데

> 서버 컴퓨터를 대여해주는 호스팅 업체를 통해 배포를 진행

## 호스팅
1. 웹 호스팅
2. 서버 호스팅

- 웹 호스팅  : 서의 일부 공간을 임대하는 개념(컴퓨터를 잘게 쪼개서 제공해줌)
- 서버 호스팅 : 물리 서버를 단독으로 임대 및 구매

> 웹 호스팅의 장점은 서버의 인프라 구축이 필요가 없다. 비용이 저렴함
> 단점은 웹 호스팅은 자원 제공이 한정적이고 단독서버에 비해ㅔ 사용량이 적다.
> laas : 컴퓨터 자원만 제공하는 형태(aws) infrastructure as a service
> PaasS : 헤로쿠 등 넷플리파이 등등 기존 환경에서 서비스를 올려주는 형태

## 리전
> aws의 서버 컴퓨터의 지사지점
> 서울 아니면 오사카가 그나마 빠르다
> 인스텀스를 만들어버리면 그 리전에 맞는 인스턴스가 생성이 되버려서 
> 스냅샷을 찍어서 인스턴스 새로 만들고 스냅샷을 인스턴스에 적용시켜 주면된다.
> 사전에 리전을 잘 확인

## EC2
> Elasic Computer Cloud의 약자
> 가상서버를 제공해준다.
> 원하는 컴퓨터 자원을 빠르게 확장 또는 축소해서 원하는 사이즈의 
> 가상 서버를 설정해서 제공받을 수 있다.
> 원하는 운영체제를 선택해서 제공받을 수 있다.
> 비용도 저렴하고 안정성도 높다.

## 우분투
> lat 버전의 무료 버전 프리티어 사용가능으로 해야 비용 발생 X, 적게 나옴

## key
> use나 외장하드에 보관하고 전달해야 한다.
> 클라우드 저장소에 올리면 절대안된다.


### 보안 그룹 설정
> 인바운드가 요청이 들어왔을 때 
> 어떤 포트를 요청을 보냈을 때 허용할 거냐
> ssh하나 되어있는데 
> ssh(secure shell)
> 네트워크의 다른 컴퓨터가 원격 접속할 수 있게 해주는 프로토콜
> 보안이 중요한 환경에서 사용자가 암호화된 커넥션을 통해서 데이터를 전송할 수 있게 해주는 프로토콜
> ssh의 암호화는 세션의 모든 데이터를 암호화해서 안전하게 통신을 지향
> ssh에 접속을 할 때는 인증을 거쳐서 한다. 비밀번호 키 파일

> 내가 서버 대기상태를 포트를 3000번으로 했으면 3000번 포트도 보안그룹에 추가를 해줘야한다.
> http://domain:3000
> 포트 포워딩
> 443 포트로 보냈는데 3000포트로 요청한것과 같은 로직을 작성할 수 있다.

### http
> 프로토콜의 포트 번호는 80번 포트를 가지고 있던것
> http://naver.com 포트 포워딩 또는 프록시 
> 네이버의 서버는 대기상태 포트가 다른 포트로 지정되어 있겠지만
> 80번 포트로 요청을 보냈을 때 다른 포트에서 받아 응답을 해준 것

### https
> 프로토콜의 포트 번호가 443번 포트
> 인증서, 신뢰할 수 있는 사이트임을 증명하는 SSL/TLS인증서가 필요하다.
> http는 보안이 필요없는 일반적인 데이터 전송이라고 보면
> https는 보안이 필요한 민감한 데이터를 전송할 때 사용한다. 데이터 암호화의 신뢰성을 보장해준다.
> http로 되어있는 서버와 https로 되어이쓴ㄴ 서버는 서로 통신을 할 수 없다.

### 문제
1. 맥유저의 경우 sudo chmod로 읽기 권한을 줘야한다.(400)
2. 윈도우의 경우 권한 문제
icacls.exe mykey.pem /reset
icacls.exe mykey.pem /grant:r %username%:(R)
icacls.exe mykey.pem /inheritance:r


## 데이터 베이스 설치
> 우리 지금까지 사용한 mysql로컬에 설치가 되어있는것
> 서버 컴퓨터에 mysql을 설치해서 커넷션을 맺어서 사용하는 것
> RDS AWS에서 제공하는 서비스가 있는데 비용이 비싸 

```sh
sudo apt-get update

# mysql 설치
sudo apt-get install mysql-server
```
루트 비밀번호 설정
alter user 'root'@'localhost' identified with mysql_native_password by 'mysql';

 ## 갱신 
 flush privileges;

 # 유저를 생성 
 create user "생성할 유저의 이름"@"%" identified by 비밀번호

  create user "test"@"%" identified by 'test'


  grant all on test.* to 'admin'@'%'

  show grants for admin;

  sudo service mysql restart;

  sudo iv /etc/mysql/mysql.cnf.d/mysqld.cnf

  # 다른 호스트 접근
  bind0-address를 0.0.0.0하면 됨

  인바운드 허용
